<div class="row">
  <div class="col-xs-12 col-sm-12 col-md-12">
    <div class="group">
      <h4 class="f-weight-500">Do you suffer or have you ever suffered from:</h4>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-xs-12 col-sm-12 col-md-6">
    <div class="group">
      <label>Heart trouble and/or blood presure problem?<small class="required">*</small>:</label>
      <div class="d-flex">
        <label class="mr-2 f-weight-300"><input type="radio" name="{{health.heart_bp}}" value="yes" class="ml-0_5" /> Yes</label>
        <label class="f-weight-300"><input type="radio" name="{{health.heart_bp}}" value="no" class="ml-0_5" /> No</label>
      </div>
    </div>
    <div class="group">
      <label>Asthma, Bronchitis and/or shortness of breath?<small class="required">*</small>:</label>
      <div class="d-flex">
        <label class="mr-2 f-weight-300"><input type="radio" name="{{health.asthma_bronchitis_shortness_breath}}" value="yes" class="ml-0_5" /> Yes</label>
        <label class="f-weight-300"><input type="radio" name="{{health.asthma_bronchitis_shortness_breath}}" value="no" class="ml-0_5" /> No</label>
      </div>
    </div>
    <div class="group">
      <label>Diabetes?<small class="required">*</small>:</label>
      <div class="d-flex">
        <label class="mr-2 f-weight-300"><input type="radio" name="{{health.diabetes}}" value="yes" class="ml-0_5" /> Yes</label>
        <label class="f-weight-300"><input type="radio" name="{{health.diabetes}}" value="no" class="ml-0_5" /> No</label>
      </div>
    </div>
    <div class="group">
      <label>Epilepsy and/or fainting attacks?<small class="required">*</small>:</label>
      <div class="d-flex">
        <label class="mr-2 f-weight-300"><input type="radio" name="{{health.epilepsy_fainting_attacks}}" value="yes" class="ml-0_5" /> Yes</label>
        <label class="f-weight-300"><input type="radio" name="{{health.epilepsy_fainting_attacks}}" value="no" class="ml-0_5" /> No</label>
      </div>
    </div>
    <div class="group">
      <label>Migraine?<small class="required">*</small>:</label>
      <div class="d-flex">
        <label class="mr-2 f-weight-300"><input type="radio" name="{{health.migraine}}" value="yes" class="ml-0_5" /> Yes</label>
        <label class="f-weight-300"><input type="radio" name="{{health.migraine}}" value="no" class="ml-0_5" /> No</label>
      </div>
    </div>
    <div class="group">
      <label>Severe Head Injury?<small class="required">*</small>:</label>
      <div class="d-flex">
        <label class="mr-2 f-weight-300"><input type="radio" name="{{health.severe_head_injury}}" value="yes" class="ml-0_5" /> Yes</label>
        <label class="f-weight-300"><input type="radio" name="{{health.severe_head_injury}}" value="no" class="ml-0_5" /> No</label>
      </div>
    </div>
    <div class="group">
      <label>Back Problems?<small class="required">*</small>:</label>
      <div class="d-flex">
        <label class="mr-2 f-weight-300"><input type="radio" name="{{health.back_problems}}" value="yes" class="ml-0_5" /> Yes</label>
        <label class="f-weight-300"><input type="radio" name="{{health.back_problems}}" value="no" class="ml-0_5" /> No</label>
      </div>
    </div>
    <div class="group">
      <label>Allergies?<small class="required">*</small>:</label>
      <div class="d-flex">
        <label class="mr-2 f-weight-300"><input type="radio" name="{{health.allergies}}" value="yes" class="ml-0_5" /> Yes</label>
        <label class="f-weight-300"><input type="radio" name="{{health.allergies}}" value="no" class="ml-0_5" /> No</label>
      </div>
    </div>
    <div class="group">
      <label>Nut Allergy?<small class="required">*</small>:</label>
      <div class="d-flex">
        <label class="mr-2 f-weight-300"><input type="radio" name="{{health.nut_allergy}}" value="yes" class="ml-0_5" /> Yes</label>
        <label class="f-weight-300"><input type="radio" name="{{health.nut_allergy}}" value="no" class="ml-0_5" /> No</label>
      </div>
    </div>
    <div class="group">
      <label>Heart or circulatory diseases?<small class="required">*</small>:</label>
      <div class="d-flex">
        <label class="mr-2 f-weight-300"><input type="radio" name="{{health.heart_circulatory_diseases}}" value="yes" class="ml-0_5" /> Yes</label>
        <label class="f-weight-300"><input type="radio" name="{{health.heart_circulatory_diseases}}" value="no" class="ml-0_5" /> No</label>
      </div>
    </div>
    <div class="group">
      <label>Stomach or intestinal disorders?<small class="required">*</small>:</label>
      <div class="d-flex">
        <label class="mr-2 f-weight-300"><input type="radio" name="{{health.stomach_intestinal_disorders}}" value="yes" class="ml-0_5" /> Yes</label>
        <label class="f-weight-300"><input type="radio" name="{{health.stomach_intestinal_disorders}}" value="no" class="ml-0_5" /> No</label>
      </div>
    </div>
    <div class="group">
      <label>Any condition which causes difficulty sleeping?<small class="required">*</small>:</label>
      <div class="d-flex">
        <label class="mr-2 f-weight-300"><input type="radio" name="{{health.difficulty_sleeping}}" value="yes" class="ml-0_5" /> Yes</label>
        <label class="f-weight-300"><input type="radio" name="{{health.difficulty_sleeping}}" value="no" class="ml-0_5" /> No</label>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-xs-12 col-sm-12 col-md-6">
    <div class="group">
      <label>Fractures, Tendon, Ligament/Cartilage damage?<small class="required">*</small>:</label>
      <div class="d-flex">
        <label class="mr-2 f-weight-300"><input type="radio" name="{{health.fractures_ligament_damage}}" value="yes" class="ml-0_5" /> Yes</label>
        <label class="f-weight-300"><input type="radio" name="{{health.fractures_ligament_damage}}" value="no" class="ml-0_5" /> No</label>
      </div>
    </div>
    <div class="group">
      <label>Physical or other disability?<small class="required">*</small>:</label>
      <div class="d-flex">
        <label class="mr-2 f-weight-300"><input type="radio" name="{{health.physical_other_disability}}" value="yes" class="ml-0_5" /> Yes</label>
        <label class="f-weight-300"><input type="radio" name="{{health.physical_other_disability}}" value="no" class="ml-0_5" /> No</label>
      </div>
    </div>
    <div class="group">
      <label>Psychiatric or Mental Illness?<small class="required">*</small>:</label>
      <div class="d-flex">
        <label class="mr-2 f-weight-300"><input type="radio" name="{{health.psychiatric_mental_illness}}" value="yes" class="ml-0_5" /> Yes</label>
        <label class="f-weight-300"><input type="radio" name="{{health.psychiatric_mental_illness}}" value="no" class="ml-0_5" /> No</label>
      </div>
    </div>
    <div class="group">
      <label>Have you been hospitalised within the last 2 years?<small class="required">*</small>:</label>
      <div class="d-flex">
        <label class="mr-2 f-weight-300"><input type="radio" name="{{health.hospitalised_last_2years}}" value="yes" class="ml-0_5" /> Yes</label>
        <label class="f-weight-300"><input type="radio" name="{{health.hospitalised_last_2years}}" value="no" class="ml-0_5" /> No</label>
      </div>
    </div>
    <div class="group">
      <label>Are you suffering from or a carrier of any infectious diseases?<small class="required">*</small>:</label>
      <div class="d-flex">
        <label class="mr-2 f-weight-300"><input type="radio" name="{{health.suffered_carrier_infectious_diseases}}" value="yes" class="ml-0_5" /> Yes</label>
        <label class="f-weight-300"><input type="radio" name="{{health.suffered_carrier_infectious_diseases}}" value="no" class="ml-0_5" /> No</label>
      </div>
    </div>
    <div class="group">
      <label>Are you registered as disabled?<small class="required">*</small>:</label>
      <div class="d-flex">
        <label class="mr-2 f-weight-300"><input type="radio" name="{{health.registered_disabled}}" value="yes" class="ml-0_5" /> Yes</label>
        <label class="f-weight-300"><input type="radio" name="{{health.registered_disabled}}" value="no" class="ml-0_5" /> No</label>
      </div>
    </div>
    <div class="group">
      <label>Have you ever had or have tuberculosis?<small class="required">*</small>:</label>
      <div class="d-flex">
        <label class="mr-2 f-weight-300"><input type="radio" name="{{health.tuberculosis}}" value="yes" class="ml-0_5" /> Yes</label>
        <label class="f-weight-300"><input type="radio" name="{{health.tuberculosis}}" value="no" class="ml-0_5" /> No</label>
      </div>
    </div>
    <div class="group">
      <label>Have you ever had or have skin trouble or dermatitis?<small class="required">*</small>:</label>
      <div class="d-flex">
        <label class="mr-2 f-weight-300"><input type="radio" name="{{health.skin_trouble_dermatitis}}" value="yes" class="ml-0_5" /> Yes</label>
        <label class="f-weight-300"><input type="radio" name="{{health.skin_trouble_dermatitis}}" value="no" class="ml-0_5" /> No</label>
      </div>
    </div>
    <div class="group">
      <label>Have you ever suffered or suffer from recurring indigestive, stomach or bowel trouble?<small class="required">*</small>:</label>
      <div class="d-flex">
        <label class="mr-2 f-weight-300"><input type="radio" name="{{health.indigestive_stomach_trouble}}" value="yes" class="ml-0_5" /> Yes</label>
        <label class="f-weight-300"><input type="radio" name="{{health.indigestive_stomach_trouble}}" value="no" class="ml-0_5" /> No</label>
      </div>
    </div>
    <div class="group">
      <label>Chronic chest disorders (especially if night time symptoms are troublesome)?<small class="required">*</small>:</label>
      <div class="d-flex">
        <label class="mr-2 f-weight-300"><input type="radio" name="{{health.chronic_chest_disorders}}" value="yes" class="ml-0_5" /> Yes</label>
        <label class="f-weight-300"><input type="radio" name="{{health.chronic_chest_disorders}}" value="no" class="ml-0_5" /> No</label>
      </div>
    </div>
    <div class="group">
      <label>Any medical condition which requires medication to a strict time table?<small class="required">*</small>:</label>
      <div class="d-flex">
        <label class="mr-2 f-weight-300"><input type="radio" name="{{health.strict_time_medication}}" value="yes" class="ml-0_5" /> Yes</label>
        <label class="f-weight-300"><input type="radio" name="{{health.strict_time_medication}}" value="no" class="ml-0_5" /> No</label>
      </div>
    </div>
    <div class="group">
      <label>Other health issues which may affect your fitness at night?<small class="required">*</small>:</label>
      <div class="d-flex">
        <label class="mr-2 f-weight-300"><input type="radio" name="{{health.night_unfitness}}" value="yes" class="ml-0_5" /> Yes</label>
        <label class="f-weight-300"><input type="radio" name="{{health.night_unfitness}}" value="no" class="ml-0_5" /> No</label>
      </div>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-xs-12 col-sm-12 col-md-12">
    <div class="group">
      <label>If you have answered yes to any of the above questions, please give further details below<small class="required">*</small>:</label>
      <textarea class="controls" rows="4" value="{{health.health_details}}"></textarea>
    </div>
    <div class="group">
      <label>Do you currently use any form of medication regularly? If so, please give details below<small class="required">*</small>:</label>
      <textarea class="controls" rows="4" value="{{health.medication_details}}"></textarea>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-xs-12 col-sm-12 col-md-12">
    <div class="group">
      <label>
        <input type="checkbox" checked="{{health.disclosure}}" class="mr-1" /> Disclosure to tick first that following question may found inappropriate and disturbing.
      </label>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-xs-12">
    <div class="group">
      <label>Reason for Change<small class="required">*</small>:</label>
      <textarea class="controls" rows="5" value="{{change_log.comment}}"></textarea>
    </div>
  </div>
</div>

<div class="row">
  <div class="col-xs-12 col-sm-12 col-md-12 mt-1">
    <div class="d-flex justify-content-space-between align-items-center">
      <div>
        <button class="btn primary" on-click="onPressSaveHealth">Save</button>
      </div>
      <div></div>
    </div>
  </div>
</div>


@section('scripts')
@parent
<script type="text/javascript">
  $Data.set('health', null)
  $Data.set('change_log', null)

  $Event.on('page.init', () => {
    if ($Data.get('tab') == 'health') {
      var params = {
        worker_id: $Data.get('worker.id'),
      }
      $Api.get('<%ADMIN_URL%>/api/applications/health/get').params(params).send((res) => {
        if (!$Data.get('health.id')) {
          $Data.set('health.worker_id', $Data.get('worker.id'))
        }

        $Data.set('change_log.method', 'update')
        $Data.set('change_log.type', 'worker.health')
        $Data.set('change_log.user_id', $Data.get('me.id'))
        $Data.set('change_log.record_id', $Data.get('worker.id'))
      })
    }
  })

  $Event.on('onPressSaveHealth', (callback) => {
    var params = {
      health: $Data.get('health'),
      change_log: $Data.get('change_log'),
    }
    $Api.post('<%ADMIN_URL%>/api/applications/health/save').params(params).send(res => {
      callback(res)
    })
  })
</script>
@endsection